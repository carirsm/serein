<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Log Your Mood - Serein</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

    <nav>
        <a href="/view" class="nav-button">View Mood History</a>
    </nav>

    <h1>How are you feeling today?</h1>

    <form action="/log" method="post">
        <label for="mood">Mood:</label>
        <select name="mood" id="mood" required>
            <option value="">-- Select --</option>
            <option value="good">Good</option>
            <option value="neutral">Neutral</option>
            <option value="bad">Bad</option>
        </select>
    
        <br><br>
    
        <label for="reason">Reason (optional):</label><br>
        <textarea name="reason" id="reason" rows="4" cols="40"></textarea>
    
        <br><br>
    
        <button type="submit">Log Mood</button>
    </form>
    
    <!-- Toast Message Container -->
    <div id="toast" style="display:none; position:fixed; top:10px; right:10px; background-color:#333; color:white; padding:10px 20px; border-radius:5px; z-index:1000;"></div>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <script>
          document.addEventListener("DOMContentLoaded", function() {
            const toast = document.getElementById("toast");
            const category = "{{ messages[0][0] }}";
            const message = "{{ messages[0][1] }}";
            
            toast.textContent = message;
            toast.style.backgroundColor = category === "success" ? "#4CAF50" : "#F44336";
            toast.style.display = "block";
            
            setTimeout(function() {
              toast.style.display = "none";
            }, 3000);
          });
        </script>
      {% endif %}
    {% endwith %}
</body>
</html>